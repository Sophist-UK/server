#
#   Ensure that calling SHOW BINLOG EVENTS FROM <offset> with an invalid offset
# will not result in error messages in the server log. That is, this call is a
# read operation for a user, and if it fails due to invalid usage, that is not
# a server error, but only one to report to the user.
#
# References:
#   MDEV-32628: Cryptic ERROR message & inconsistent behavior on incorrect
#               SHOW BINLOG EVENTS FROM ...
#
--source include/have_binlog_format_row.inc

--echo #
--echo # Initialize test data
set @save_master_verify_checksum = @@global.master_verify_checksum;
set @@global.master_verify_checksum = 1;
create table t1 (a int);
insert into t1 values (1);
--let $pos= 500

--disable_abort_on_error
--disable_result_log
--disable_query_log
--while ($pos) {
  --eval SHOW BINLOG EVENTS FROM $pos
  --dec $pos
}
--enable_query_log
--enable_result_log
--enable_abort_on_error

set @@global.master_verify_checksum = @save_master_verify_checksum;
drop table t1;
